{
  "industry": "agritech",
  "title": "Precision Agriculture Data Platform",
  "description": "Deploy an end-to-end agricultural intelligence system combining IoT soil sensors, satellite imagery, weather feeds, and irrigation logs. Implement data quality profiling, multi-source joins, and yield prediction features.",
  "difficulty": "expert",
  "estimatedMinutes": 120,
  "xpReward": 2500,
  "objectives": [
    "Implement data quality profiling with Great Expectations for sensor data",
    "Fix broken multi-source joins (sensors + satellite + weather) with incorrect join conditions",
    "Calculate NDVI (Normalized Difference Vegetation Index) from satellite imagery",
    "Build irrigation efficiency metrics with proper time-window aggregations",
    "Create yield prediction features with crop-stage-aware transformations"
  ],
  "technologies": [
    "Great Expectations",
    "Complex Joins",
    "Geospatial Functions",
    "Time Series Windows",
    "Feature Engineering"
  ],
  "scenario": {
    "industry": "Agriculture Technology",
    "challenge": "A precision agriculture platform ingests data from 10,000+ soil sensors, daily satellite imagery (10m resolution), hourly weather feeds, and irrigation system logs. Current pipeline has 15% data quality issues (out-of-range pH values, GPS drift, missing timestamps). Multi-source joins are broken - using INNER JOIN causes 40% data loss. NDVI calculations return negative values due to band reversal. Yield predictions are 28% less accurate than baseline due to feature engineering bugs.",
    "deployment": "5 notebooks + 1 Great Expectations suite + 3 feature tables"
  },
  "validations": [
    {
      "id": "great_expectations_suite",
      "name": "Data Quality Suite Passing",
      "query": "SELECT COUNT(*) FROM {catalog}.{schema_prefix}_silver.soil_sensors_clean WHERE validation_status = 'PASS'",
      "expected": 1,
      "hint": "Check validation rules - pH range might be too strict, should be 4.0-9.0"
    },
    {
      "id": "sensor_weather_join",
      "name": "Multi-Source Join Completeness",
      "query": "SELECT COUNT(*) FROM {catalog}.{schema_prefix}_silver.sensor_weather_enriched WHERE weather_temp_max_c IS NOT NULL",
      "expected": 950,
      "hint": "Use LEFT JOIN to preserve sensor records when weather data is missing"
    },
    {
      "id": "ndvi_calculation",
      "name": "NDVI Value Range",
      "query": "SELECT MIN(computed_ndvi) as min_ndvi, MAX(computed_ndvi) as max_ndvi FROM {catalog}.{schema_prefix}_silver.ndvi_metrics",
      "expected": "min_ndvi >= -1 AND max_ndvi <= 1",
      "hint": "NDVI = (NIR - Red) / (NIR + Red) - ensure band ordering is correct"
    },
    {
      "id": "irrigation_efficiency",
      "name": "Irrigation Efficiency Metrics",
      "query": "SELECT AVG(water_use_efficiency) FROM {catalog}.{schema_prefix}_gold.irrigation_efficiency WHERE crop_type = 'corn'",
      "expected": 0.85,
      "hint": "Water Use Efficiency = (yield / water_applied) - check units and time window aggregation"
    },
    {
      "id": "yield_prediction_features",
      "name": "Yield Prediction Feature Count",
      "query": "SELECT COUNT(*) as col_count FROM {catalog}.{schema_prefix}_gold.yield_prediction_features LIMIT 1",
      "expected": 12,
      "hint": "Need 12+ features covering soil, weather/GDD, NDVI, and irrigation"
    }
  ],
  "hintsInNotebooks": false,
  "hintsNote": "No SQL hints are provided in the notebooks. You must identify the issues and implement fixes using the briefing context and notebook error descriptions only.",
  "dataFiles": [
    "soil_sensors.json",
    "satellite_imagery.csv",
    "weather_history.csv",
    "irrigation_logs.csv",
    "harvest_records.csv",
    "fields.csv",
    "field_boundaries.geojson"
  ],
  "notebooks": [
    "01_data_quality_profiling.py",
    "02_multi_source_enrichment.py",
    "03_ndvi_calculation.py",
    "04_irrigation_efficiency.py",
    "05_yield_prediction_features.py"
  ]
}
